# =============================================================================
# WEB APP (Next.js) – WHAT YOU ACTUALLY NEED
# =============================================================================
# These vars are read by apps/web when you run from repo root (pnpm dev / build).
#
# --- DEMO MODE (default: mock vaults, in-memory operator ops) ---
#   Required: nothing (app runs with mock data).
#   Optional: NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID (wallet connect), NEXT_PUBLIC_DATA_SOURCE=demo
#
# --- LIVE MODE (real Supabase + indexer) ---
#   Required:
#     DATA_SOURCE=live  (or NEXT_PUBLIC_DATA_SOURCE=live)
#     SUPABASE_URL=     (or NEXT_PUBLIC_SUPABASE_URL)
#     SUPABASE_SERVICE_ROLE_KEY=  (or SUPABASE_ANON_KEY / NEXT_PUBLIC_SUPABASE_ANON_KEY)
#     OPERATOR_ADMIN_ADDRESSES=0xYourWallet,...  (comma-separated; required for operator APIs)
#   Optional but recommended:
#     INDEXER_URL=      (Goldsky subgraph URL for TVL/charts)
#     DEPLOY_EXECUTOR_URL=  (if deploy from UI via remote keeper)
#     DEPLOY_EXECUTOR_TOKEN=
#     NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID=
#     NEXT_PUBLIC_OPERATOR_TX_MODE=sign_only | send_transaction
#
# --- LOCAL DEPLOY FROM WEB (optional: run forge from Next API) ---
#   PHAROS_ATLANTIC_RPC_URL=, DEPLOYER_PRIVATE_KEY=, TRANCHE_FACTORY=,
#   CONTRACTS_WORKSPACE_DIR=  (path to contracts/)
#
# --- HOW THE FRONTEND TALKS TO THE WORKER (Keeper) ---
#   The frontend never calls the Worker directly. Flow:
#     User clicks "Deploy & sync" or "Update rate" in Operator UI
#       → browser calls Next.js API (POST /api/operator/deploy or .../accountant/update-rate)
#       → API runs on server; if DEPLOY_EXECUTOR_URL is set, it forwards the request to the Worker
#       → Worker (Railway) runs forge script and returns result; API then updates Supabase etc.
#   So set in the *web* env (same .env as above):
#     DEPLOY_EXECUTOR_URL=https://your-keeper.railway.app   (base URL, no /deploy suffix)
#     DEPLOY_EXECUTOR_TOKEN=   (optional; if Worker expects Bearer auth)
#   If DEPLOY_EXECUTOR_URL is empty, the API tries to run Forge locally (needs CONTRACTS_WORKSPACE_DIR etc.).
# =============================================================================

# Supabase
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Shared chain RPC
PHAROS_ATLANTIC_RPC_URL=

# Keeper (apps/keeper/src/rate-updater.mjs)
PRIVATE_KEY=
ACCOUNTANT_UPDATER_PRIVATE_KEY=
VAULT=
ACCOUNTANT=
ASSET=0xE7E84B8B4f39C507499c40B4ac199B050e2882d5
MIN_UPDATE_BPS=1
ALLOW_PAUSE_UPDATE=false
KEEPER_INTERVAL_MS=300000
KEEPER_RUN_ONCE=false
KEEPER_CONTRACTS_DIR=
KEEPER_WORKER_INTERVAL_MS=3000

# Operator deploy API (local forge mode)
CONTRACTS_WORKSPACE_DIR=
DEPLOYER_PRIVATE_KEY=
TRANCHE_FACTORY=0x7fBaFFA7fba0C6b141cf06B01e1ba1f6FB2350F8
TRANCHE_REGISTRY=0x341A376b59c86A26324229cd467A5E3b930792C6
DEPLOYER_OPERATOR=
DEPLOYER_GUARDIAN=
DEPLOYER_STRATEGIST=
DEPLOYER_MANAGER_ADMIN=

# Operator deploy API (remote deploy executor mode)
DEPLOY_EXECUTOR_URL=
DEPLOY_EXECUTOR_TOKEN=

# Deploy executor service (apps/keeper/src/deploy-executor.mjs)
DEPLOY_EXECUTOR_HOST=0.0.0.0
DEPLOY_EXECUTOR_PORT=8787

# Indexer (Goldsky subgraph)
INDEXER_URL=

# Optional public envs for client-side fetches
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
NEXT_PUBLIC_DATA_SOURCE=demo
NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID=
NEXT_PUBLIC_OPERATOR_TX_MODE=sign_only

# Server-side data source
DATA_SOURCE=demo

# Server-side operator auth (required in live mode). Comma-separated wallet addresses
# allowed to create operations, update vaults, deploy, etc. Add your operator wallet.
# Example: OPERATOR_ADMIN_ADDRESSES=0x1234...abcd,0x5678...ef01
OPERATOR_ADMIN_ADDRESSES=
